# 中原大學 土木系 ＡＩ於土木之應用 第二次期中考

## 第一題：爬蟲程式

撰寫一個爬蟲程式，能夠下載 2024 年 1 月 1 日至 4 月 30 日的高速公路交通資料 (M05A)，並完成以下要求：

### 1.1 下載與解壓縮

#### 1.1.1 2024 年 1 月 1 日的檔案
2024 年 1 月 1 日的檔案是壓縮檔案，網址如下所示：
[https://tisvcloud.freeway.gov.tw/history/TDCS/M05A/M05A_20240101.tar.gz](https://tisvcloud.freeway.gov.tw/history/TDCS/M05A/M05A_20240101.tar.gz)

這個檔案裡面包含了 2024 年 1 月 1 日的 288 個檔案，每個檔案代表一個 5 分鐘的時間區間。請下載並解壓縮這個檔案，然後將裡面的 288 個檔案合併成一個檔案，命名為 `M05A_20240101.csv`。

#### 1.1.2 2024 年 4 月 16 日的檔案
2024 年 4 月 16 日的檔案如下所示：
- [https://tisvcloud.freeway.gov.tw/history/TDCS/M05A/20240416/00/TDCS_M05A_20240416_000000.csv](https://tisvcloud.freeway.gov.tw/history/TDCS/M05A/20240416/00/TDCS_M05A_20240416_000000.csv)
- [https://tisvcloud.freeway.gov.tw/history/TDCS/M05A/20240416/00/TDCS_M05A_20240416_000500.csv](https://tisvcloud.freeway.gov.tw/history/TDCS/M05A/20240416/00/TDCS_M05A_20240416_000500.csv)

其中，`/00/` 代表的是 00 時，`000500` 代表 00:05:00，即 2024 年 4 月 16 日 00:05:00 的資料。每一天有 288 個檔案，對於這種檔案，我們需要一個一個下載並進行合併，命名為 `M05A_20240416.csv`。

### 1.2 自動判斷檔案格式
檔案的實際狀況會隨著時間改變，我們無法確定每一天的檔案狀態。因此，我們需要一個能夠自動判斷每一天在網路上的資料是哪一種形式檔案，然後進行下載。

### 1.3 檔案格式
M05A 原始的檔案資料欄位如下：
- TimeInterval
- GantryFrom
- GantryTo
- VehicleType
- SpaceMeanSpeed
- 交通量

合併檔案的格式需重新整理成以下的型態：
- TimeInterval
- GantryFrom
- GantryTo
- SpaceMeanSpeed（只要小客車 31)
- 交通量(小客車 31) (欄位名稱 v31)
- 交通量(小貨車 32) (欄位名稱 v32)
- 交通量(大客車 41) (欄位名稱 v41)
- 交通量(大貨車 42) (欄位名稱 v42)
- 交通量(聯結車 5)  (欄位名稱 v5)

## 第二題：資料特徵化

請將合併後的檔案進行資料特徵化，將 TimeInterval 欄位改為每天的第 n 個（5 分鐘）。

### 2.1 新增欄位
- **WeekDay**：星期幾（0~6），0 代表星期日
- **HellDay**：假日（0, 1, -1），0 代表非假日，1 代表假日，-1 代表假日前一天
  - 假日定義為星期六或星期日，以及中秋節、元旦、春節、清明節、端午節、國慶日、勞動節、雙十節、元宵節、重陽節、除夕
- **WayIDFrom**：起始門架的編號前三碼（字串）
- **WayIDTo**：終點門架的編號前三碼（字串）
- **WayMilageFrom**：起始門架的里程（數值）
- **WayMilageTo**：終點門架的里程（數值）
- **WayDirectionFrom**：起始門架的方向（字串，N：北，S：南，W：西，E：東）
- **WayDirectionTo**：終點門架的方向（字串，N：北，S：南，W：西，E：東）
- **速度分級 SpeedClass**：（0, 1, 2, 3, 4, 5）
  - 0 代表速度為 0（或者沒有車量與沒有資料）
  - 1 代表速度小於 20
  - 2 代表速度介於 20~40
  - 3 代表速度介於 40~60
  - 4 代表速度介於 60~80
  - 5 代表速度大於 80

特徵化後的檔案命名為 `M05A_20240416_feature.csv`。

## 第三題：資料視覺化

繪圖 HTML 檔，表現 2024 年 4 月 29 日的交通量與車速隨時間與高速公路里程的變化。



